// #region @use
@use "sort";

@use "buttons";
@use "avatar";
@use "background";

@use "eyebrows";
@use "roles";
@use "inlineStatus";

@use "full";
// #endregion

// #region Tags & split username/pronouns
[class^="biteSizeOuter"] {
  [class^="body"] > [class^="container"] {
    display: flex;
    flex-direction: column;
    > [class^="tags"] {
      background-color: var(--profile-body-background-color);
      border-radius: 8px;
      padding: 4px;
      gap: 2px;
      order: -1;

      display: flex;
      justify-content: flex-end;
      width: max-content;
      max-width: 190px;
      align-self: flex-end;
      transform: translateX(12px);
      a > * {
        width: 22px;
        height: 22px;
      }
      > [class^="clickableUsername"],
      > [class*="userTag"],
      > [class^="pronounsTooltip"] {
        position: absolute;
        top: 100%;
        margin-right: 8px;
        width: 284px;
        max-width: 284px;
      }
      > [class^="clickableUsername"],
      > [class*="userTag"] {
        transform: translateY(52px);
      }
      > [class^="pronounsTooltip"] {
        transform: translateY(72px);
      }
      > [class^="dotSpacer"] {
        display: none;
      }
      > [class^="container_"] {
        display: contents;
      }
      &:not(:has(a)) {
        padding: unset;
        margin-top: 46px;
        transform: translateX(8px);
      }
    }
  }
}
// #endregion

[class^="biteSizeOuter"] {
  width: 340px;
  box-sizing: unset;
  header {
    > svg {
      width: 340px;
      padding-right: unset;
      > foreignObject > div:before {
        display: none;
      }
    }
  }
  &:not(:has([class^="banner"][style*="background-image"])) {
    > div {
      padding-top: calc(inlineStatus.$bitesize-padding - 60px);
    }
  }
}
[class^="fullSizeOuter"] > div {
  height: -webkit-fill-available;
}

// Banner avatar cutout
[class*="biteSizeOuter"] circle {
  &[cx="52"]/*[cy="97"][r="46"]*/ {
    // Image
    cx: 51;
    cy: 98;
    r: 40.59;
    // r: 35.294;
  }
  &[cx="56"]/*[cy="101"][r="46"]*/ {
    // No image
    cx: 54.5;
    cy: 101.5;
    r: 40.59;
    // r: 35.294;
  }
}

// Activities
[class*="userProfileOuter"]:not([class^="userProfileModalOuter"])
  [class^="activityBiteSizePopout"] {
  padding: unset;
  border-radius: unset;
  background: unset !important;
}

// About me
[class*="userProfileOuter"]:not([class^="userProfileModalOuter"]) {
  [class^="descriptionClamp"] {
    -webkit-line-clamp: 6;
    max-height: unset;
  }
  [class^="viewFullBio"] {
    display: none;
  }
}

// Body inner
[class*="biteSizeOuter"] {
  > div {
    gap: unset !important;
    // padding-bottom: 16px;
    background: linear-gradient(
      var(--profile-gradient-start),
      var(--profile-gradient-start) var(--custom-user-banner-height-bite-size),
      var(--profile-gradient-end)
    );
    overflow: scroll auto;
    > [class^="body"] > [class^="container"] {
      > [class^="usernameRow"] {
        padding-top: 12px;
        margin-top: 16px;
        order: 1;
        padding-bottom: 38px; // Padding for username and pronouns
      }
      &:not(:has([class^="pronounsTooltip"])) > [class^="usernameRow"] {
        padding-bottom: 18px; // Padding for username
      }
    }
    // Inner body gap
    > header [class^="visibleContainer"],
    > [class^="body"] > *:not([aria-hidden]) {
      padding-bottom: 12px;
    }
    // Left and right inner body paddings
    > header [class^="visibleContainer"],
    > [class^="body"] > *:not([aria-hidden]),
    > footer {
      padding-left: 12px;
      padding-right: 12px;
      margin-left: 16px;
      margin-right: 16px;
      z-index: 1;
    }
    > [class^="body"]::before {
      content: "";
      height: 1px;
      min-height: 1px;
      background-color: var(--profile-body-divider-color);
      margin-bottom: 12px;
      margin-left: 28px;
      margin-right: 28px;
      position: sticky;
      z-index: 1;
    }
    &::-webkit-scrollbar {
      width: 8px;
      height: 16px;
    }
    &::-webkit-scrollbar-corner {
      background-color: transparent;
    }
    &::-webkit-scrollbar-thumb {
      background-color: var(--profile-body-divider-color);

      background-clip: padding-box;
      border: 2px solid transparent;
      border-radius: 4px;
      // background-color: var(--scrollbar-thin-thumb);
      min-height: 40px;
    }
    &::-webkit-scrollbar-track {
      margin-top: inlineStatus.$bitesize-padding;
      margin-bottom: 4px;

      border: 2px solid var(--scrollbar-thin-track);
      background-color: var(--scrollbar-thin-track);
      border-color: var(--scrollbar-thin-track);
    }
  }
}

[class^="userPanelOuter"] [class^="bannerSVGWrapper"] {
  position: absolute;
  top: 0px;
}

// #region
// [class*="biteSizeOuter"] {
//   header {
//     &:not(:has([style*="background-image"])) {
//       > svg {
//         > foreignObject {
//           transform: translateY(calc(-105px + 60px));
//         }
//       }
//       > [class^="avatar"] > div {
//         transform: translateY(-45px);
//       }
//     }
//   }
//   // Unthemed
//   &:not([class*="userProfileOuterThemed"]) header {
//     > svg {
//       border-top-left-radius: var(--radius-sm);
//       border-top-right-radius: var(--radius-sm);
//     }
//     > [class^="avatar"] {
//       transform: translateY(calc(61px + inlineStatus.$bitesize-padding * -1));
//     }
//   }
//   // Themed/Nitro
//   &[class*="userProfileOuterThemed"] header {
//     > [class^="avatar"] {
//       transform: translateY(calc(57px + inlineStatus.$bitesize-padding * -1));
//     }
//   }
// }
// #endregion

// Message box
[class^="channelTextArea"] > [class^="inner"] {
  background-color: transparent;
  border: 1px solid var(--profile-message-input-border-color);
}

// Activities
[class^="activityBiteSizePopout"] > img {
  width: 24px !important;
  height: 24px !important;
}
